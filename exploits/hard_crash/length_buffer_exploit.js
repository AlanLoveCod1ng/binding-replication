// Linked issue: https://github.com/nodejs/node/issues/11954

const dgram = require('dgram');
const util = require('util');
// Create object that passes instanceof Buffer check
function FakeBuffer() { }
util.inherits(FakeBuffer, Buffer);
const message = new FakeBuffer();
// Pass object to code that eventually calls Length
dgram.createSocket('udp4').send(message, 5000);

// Error Msg:
// /home/ubuntu/.nvm/versions/node/v6.9.2/bin/node[4122]: ../src/node_buffer.cc:213:size_t node::Buffer::Length(v8::Local<v8::Value>): Assertion `val->IsUint8Array()' failed.
//  1: node::Abort() [node]
//  2: node::Assert(char const* const (*) [4]) [node]
//  3: 0x10a75fd [node]
//  4: node::UDPWrap::DoSend(v8::FunctionCallbackInfo<v8::Value> const&, int) [node]
//  5: v8::internal::FunctionCallbackArguments::Call(void (*)(v8::FunctionCallbackInfo<v8::Value> const&)) [node]
//  6: 0x9e7422 [node]
//  7: 0x9e7a9e [node]
//  8: 0x2f2f4a4092a7
// Aborted (core dumped)